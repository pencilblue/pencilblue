^tmp_admin=head^
<div class="col-md-9">
    ^tmp_admin=elements=error_success^
    ^tmp_admin=elements=sub_nav^
    ^tmp_admin=elements=tab_nav^
    <style>
        .form-group textarea {
            height: 125px;
        }
        #localization-plugin-dropdown, #localization-locale-dropdown, #view-localization-locale-dropdown, #view-localization-plugin-dropdown {
            width: 100%;
        }
    </style>

    <form name="localizationKVForm" ng-submit="saveLocales()" novalidate>
        <fieldset>
            <div class="tab-content">
                <!--Page for Adding Locales-->
                <div class="tab-pane active" id="addLocale">
                    <h1>Localization Settings</h1>
                    <!-- Top Settings for Adding Locales -->
                    <div class="row">
                        <div class="col-xs-6 col-xs-offset-3">
                            <label>Current Site to Apply Locales to:</label>
                            <input name="siteName" type="text" class="form-control"
                                   placeholder="site name"
                                   ng-model="siteName" readonly>
                            <label>Select Language:</label>
                            <select id="localization-locale-dropdown" ng-change="getAllLocalizations()" ng-model="currentLocale">
                                <option ng-selected="{{lang === currentLocale}}" ng-repeat="lang in enabledLocales" value="{{lang}}">{{lang}}</option>
                            </select>
                            <label>Select Plugin:</label>
                            <select id="localization-plugin-dropdown" ng-change="getAllLocalizations()" ng-model="currentPlugin">
                                <option ng-selected="{{plugin === currentPlugin}}" ng-repeat="plugin in activePlugins" value="{{plugin}}">{{plugin}}</option>
                            </select>
                        </div>
                    </div>

                    <hr>

                    <!--Add/Edit Localizations-->
                    <div class="tab-pane active" id="locale-overrides-section">
                        <label>Add Localizations</label>

                        <!-- Title Row -->
                        <div class="row">
                            <div class="col-xs-5">
                                <label>Localization Keys</label>
                            </div>
                            <div class="col-xs-5">
                                <label>Localization Values</label>
                            </div>
                            <div class="col-xs-2">
                            </div>
                        </div>
                        <!-- Localization Rows -->
                        <div class="row" ng-repeat="localField in localizationKVSet">
                            <div class="col-xs-5">
                                <div class="form-group" ng-class="{'has-error': !isKeyValid($index)}">
                                    <input name="localFieldKey_{{$index}}" type="text" class="form-control"
                                           placeholder="Localization Key"
                                           ng-model="localField.key" ng-model-options="{allowInvalid: true}" required>

                                    <div class="form_error" ng-if="!isKeyValid($index)">
                                        ^loc_THIS_FIELD_IS_REQUIRED^
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-5">
                                <div class="form-group" ng-class="{'has-error': !isValueValid($index)}">
                                    <input name="localFieldValue_{{$index}}" type="text" class="form-control"
                                           placeholder="Localization Value Text"
                                           ng-model="localField.value" ng-model-options="{allowInvalid: true}" required>

                                    <div class="form_error" ng-if="!isValueValid($index)">
                                        ^loc_THIS_FIELD_IS_REQUIRED^
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-1">
                                <div class="form-group">
                                    <div class="btn btn-default" ng-click="removeField($index)">
                                        <i class="fa fa-minus"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <br>
                        <hr>
                        <br>

                        <!--Add Fields-->
                        <label>Add a field...</label><br>
                        <button type="button" class="btn btn-success add_field_button" ng-click="addField('custom')">
                            <i class="fa fa-plus"></i>
                            Add a Custom Locale
                        </button>
                    </div>

                    <!--submit button-->
                    <a class="btn btn-default" href="/admin/localization">
                        <i class="fa fa-ban"></i>&nbsp;^loc_CANCEL^
                    </a>
                    <button type="submit" class="btn btn-primary" ng-disabled="saving">
                        <i class="fa" ng-class="{'fa-save': !saving, 'fa-circle-o-notch fa-spin': saving}"></i>&nbsp;^loc_SAVE^
                    </button>
                </div>

                <!--Page for Viewing Existing Locales-->
                <div class="tab-pane" id="viewLocale">
                    <h1>View Locales</h1>
                    <div class="row">
                        <div class="col-xs-6 col-xs-offset-3">
                            <label>Current Site to Apply Locales to:</label>
                            <input name="siteName" type="text" class="form-control"
                                   placeholder="site name"
                                   ng-model="siteName" readonly>
                            <label>Select Language:</label>
                            <select id="view-localization-locale-dropdown" ng-change="getAllLocalizations()" ng-model="currentLocale">
                                <option ng-selected="{{lang === currentLocale}}" ng-repeat="lang in enabledLocales" value="{{lang}}">{{lang}}</option>
                            </select>
                            <label>Select Plugin:</label>
                            <select id="view-localization-plugin-dropdown" ng-change="getAllLocalizations()" ng-model="currentPlugin">
                                <option ng-selected="{{plugin === currentPlugin}}" ng-repeat="plugin in activePlugins" value="{{plugin}}">{{plugin}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <hr>
                        <div class="col-xs-12" style="background-color:#fff; font-weight:bold;">
                            <div class="input-group" style="width:100%; margin-bottom:20px">
                                <input type="text" class="form-control" placeholder="Search Keys for..."
                                       ng-model="activeQuery"
                                       style="width:100%;">
                <span class="input-group-btn" ng-click="clearSearch('activeQuery')">
                    <button class="btn btn-default" type="button"><i class="fa fa-search"
                                                                     ng-class="{'fa-search': !activeQuery.length, 'fa-times': activeQuery.length}"></i>
                    </button>
                </span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                Generic Plugin Keys
                            </div>
                            <div class="panel-body" ng-if="!generics.length">
                                No Generic Keys
                            </div>
                            <table id="active_sites_table" class="table table-responsive table-condensed"
                                   ng-if="generics.length > 0">
                                <tr id="active_sites_table_header">
                                    <th id="active_name_header" > Key</th>
                                    <th id="active_date_header" >Value</th>
                                </tr>
                                <tr class="active_site_row"
                                    ng-repeat="item in generics | filter:activeQuery">
                                    <td ng-bind="item.key"></td>
                                    <td ng-bind="item.val"></td>
                                </tr>
                            </table>
                        </div>

                        <div class="row">
                            <div class="col-xs-12" style="background-color:#fff; font-weight:bold;">
                                <div class="input-group" style="width:100%; margin-bottom:20px">
                                    <input type="text" class="form-control" placeholder="Search Overrides..."
                                           ng-model="inactiveQuery"
                                           style="width:100%;">
                                    <span class="input-group-btn" ng-click="clearSearch('inactiveQuery')">
                    <button class="btn btn-default" type="button"><i class="fa fa-search"
                                                                     ng-class="{'fa-search': !inactiveQuery.length, 'fa-times': inactiveQuery.length}"></i>
                    </button>
                </span>

                                </div>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-heading">
                                Site Overrides
                            </div>
                            <div class="panel-body" ng-if="!siteLocales.length">
                                No Site Overrides
                            </div>
                            <table id="active_sites_table" class="table table-responsive table-condensed"
                                   ng-if="siteLocales.length > 0">
                                <tr id="active_sites_table_header">
                                    <th id="active_name_header" > Key</th>
                                    <th id="active_date_header" >Value</th>
                                </tr>
                                <tr class="active_site_row"
                                    ng-repeat="item in siteLocales | filter:inactiveQuery">
                                    <td ng-bind="item.key"></td>
                                    <td ng-bind="item.val"></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
        </fieldset>
    </form>
</div>

^tmp_admin=elements=progress_console_modal^
</div>
^tmp_angular=admin=sites=localization_settings^
^tmp_admin=footer^
