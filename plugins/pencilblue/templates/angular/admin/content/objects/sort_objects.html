<script type="text/javascript">
    angular.module('pencilblueApp', ['as.sortable'])
    .controller('PencilBlueController', function($scope, $http, $timeout) {
        ^angular_objects^
        ^tmp_angular=admin=elements=error_success^

        $scope.saveSorting = function() {
            var sorting = [];
            for(var i = 0; i < $scope.customObjects.length; i++) {
                sorting.push($scope.customObjects[i]._id.toString());
            }

            $scope.saving = true;

            $http.post('/actions/admin/content/objects/' + $scope.objectType._id + '/sort', {sorted_objects: sorting})
            .then(function({data: result}) {
                $scope.successMessage = result.message;
                $scope.saving = false;
            })
            .catch(function({data: error, status}) {
                $scope.errorMessage = error.message;
                $scope.saving = false;
            });
        }
    });
</script>
