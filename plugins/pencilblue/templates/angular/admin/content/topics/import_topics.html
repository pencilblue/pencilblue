<script type="text/javascript">
    angular.module('pencilblueApp', ['ngFileUpload'])
    .controller('PencilBlueController', function($scope, $http, Upload, $timeout) {
        ^angular_objects^
        ^tmp_angular=admin=elements=error_success^

        $scope.onFileSelect = function($files) {
            for (var i = 0; i < $files.length && i < 1; i++) {
                var file = $files[i];
                $scope.uploading = true;
                $scope.uploadPercent = 0;
                $scope.upload = Upload.upload({
                    url: '/actions/admin/content/topics/import',
                    data: { file: file }
                }).progress(function(evt) {
                    $scope.uploadPercent = parseInt(100.0 * evt.loaded / evt.total);
                }).success(function(data, status, headers, config) {
                    $scope.successMessage = data.message;
                    $scope.uploading = false;
                }).error(function(data, status) {
                    $scope.errorMessage = data.message;
                    $scope.uploading = false;
                });
            }
        };
    });
</script>
